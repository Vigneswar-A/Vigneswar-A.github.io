select t.student_id, student_name, t.subject_name, sum(case when examinations.subject_name is null then 0 else 1 end) as attended_exams from (select student_id, student_name, subject_name from students, subjects) t left join examinations on t.student_id = examinations.student_id and t.subject_name = examinations.subject_name group by t.student_id, student_name, t.subject_name order by student_id, subject_name